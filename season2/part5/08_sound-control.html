<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>사운드 재생 제어하기</title>
  <link rel="stylesheet" href="./css/08_sound-control.css">
</head>
<body>
  <!-- 제작노트
  1. html 구조 만들기
  2. 사운드 재생 일시정지 - 자바스크립트로
  3. 이퀄라이저 css 애니메이션 만들기
  4. 자바스크립트로 클래스를 추가 제거해서 이퀄라이저 css 애니메이션 제어 -->

  <div class="frame">
    <h1>자바스크립트 사운드 재생 제어</h1>
    <div class="buttons">
      <button id="btnPlayPause" onclick="playPause();">Play<i class="fas fa-play"></i></button>
      <button id="btnStop" onclick="stop();">Stop<i class="fas fa-stop"></i></button>
    </div>

    <audio id="audio" src="./images/mountain-sky-bgm.mp3" type="audio/mpeg"></audio>

    <div id="audioBar" class="audio-status">
      <span style="height: 30%;"></span>
      <span style="height: 100%;"></span>
      <span style="height: 70%;"></span>
      <span style="height: 40%;"></span>
    </div>
  </div>

  <script>
    var audio = document.getElementById('audio');
    var btnPlayPause = document.getElementById('btnPlayPause');
    var btnStop = document.getElementById('btnStop');
    var status = 0; // 기본값 : 일시정지

    function playPause() {
      if(status == 0) { // 정지되어있다면
        status = 1; // 재생시켜라
        audio.play();
        btnPlayPause.innerHTML = 'Pause<i class="fas fa-pause"></i>'; // 버튼은 일시정지 모양으로 
        document.getElementById('audioBar').classList.add('active');
      } else { // 재생되고있다면 
        status = 0; // 정지시켜라
        audio.pause();
        btnPlayPause.innerHTML = 'Play<i class="fas fa-play"></i>'; // 버튼은 재생 모양으로
        document.getElementById('audioBar').classList.remove('active');
      }
      // console.log(status);
    }
    function stop() {
      playPause();
      audio.pause();
      audio.currentTime = 0; // 오디오의 재생위치를 처음으로
      btnPlayPause.innerHTML = 'Play<i class="fas fa-play"></i>'; // 버튼은 재생 모양으로
      document.getElementById('audioBar').classList.remove('active');
    }
  </script>
</body>
</html>