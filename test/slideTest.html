<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <title>슬라이드쇼에 이전 다음 버튼 연결</title>
  <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
  <link rel="stylesheet" href="/test/slideTest.css">
</head>

<body>

  <!-- 튀어나오는애 자르는 부모 -->
  <div class="tab-inner">

    <input type="radio" name="tabmenu" id="tab1" checked>
    <input type="radio" name="tabmenu" id="tab2">
    <input type="radio" name="tabmenu" id="tab3">

    <div class="slide">
      <!-- slide-inner가 긴애 -->
      <div class="slide-inner">
        <a href="#none1"><img src="/part1/images/imac_colors.jpeg" alt=""></a>
        <a href="#none2"><img src="/part1/images/imac_price.jpeg" alt=""></a>
        <a href="#none3"><img src="/part1/images/imac_yellow.jpeg" alt=""></a>
      </div>
    </div>

    <div class="btn">
      <label for="tab1"></label>
      <label for="tab2"></label>
      <label for="tab3"></label>
    </div>

    <div class="btns" id="previous">
      <i class="fa fa-arrow-left"></i>
    </div>
    <div class="btns" id="next">
      <i class="fa fa-arrow-right"></i>
    </div>

  </div>

  <script>
    // 현재 위치
    var pos = 0;
    // 슬라이드 개수
    var totalSlides = $('.slide-inner a').length;
    // 슬라이드 하나의 넓이
    var sliderWidth = $('.slide-inner a').width();


    $(function () {

      // 아무것도 안한 처음 상태에서 left를 확인해보자 
      // console.log("처음상태 : " + $('.slide-inner').css('left'));

      //previous
      $('#previous').click(function () {
        slideLeft();

        console.log(addcount)
        console.log(minuscount)
      });

      //next 
      // $('#next').click(function () {
      //   slideRight();

      // });

      $('#next').click(() => {
        slideRight()
        console.log(addcount)
        console.log(minuscount)
      });


      //automatic slider
      var autoSlider = setInterval(slideRight, 10000);

      $('.tab-inner').hover(
        function () {
          //$(this).addClass('active');
          clearInterval(autoSlider);
        },
        function () {
          // $(this).removeClass('active');
          autoSlider = setInterval(slideRight, 10000);
        }
      );



    }); // onload 


    let addcount = 0;
    let minuscount = totalSlides - 1;

    const slideLeft = () => {
      let test = $('.slide-inner').css('left');
      let locL = $('.slide-inner').css('left').substr(0, test.indexOf("px"));

      if (locL == 0) {
        $('.slide-inner').css('left', `-1000px`);
      } else {
        $('.slide-inner').css('left', `${-(sliderWidth * (--minuscount))}px`);
      }

      setTimeout(() => {
        test = $('.slide-inner').css('left');
        locL = $('.slide-inner').css('left').substr(0, test.indexOf("px"));
        pagination(locL);

      }, 501);

    }

    // const slideRight = () => {
    function slideRight() {

      let test = $('.slide-inner').css('left');
      let locR = $('.slide-inner').css('left').substr(0, test.indexOf("px"));

      if (locR > -1000) {
        $('.slide-inner').css('left', `${-(sliderWidth * (++addcount))}px`);
      } else {
        $('.slide-inner').css('left', '0px');
        addcount = 0;
      }

      setTimeout(() => {
        test = $('.slide-inner').css('left');
        locR = $('.slide-inner').css('left').substr(0, test.indexOf("px"));
        console.log("locR" + typeof locR)
        // console.log("next버튼 눌렀을때 " + $('.slide-inner').css('left'));
        // console.log("type : "+ typeof locR)
        // console.log("locR :"+ locR)
        pagination(locR);

      }, 501);

    }

    const pagination = (loc) => {

      console.log("\n\n\n페이징");
      console.log(typeof loc);
      console.log("??" + loc);

      // switch (loc) {
      //   case '0':
      //     // $('label[for=tab1]').siblings().removeClass('active');
      //     // $('label[for=tab1]').addClass('active');

      //     // $('input[name=tabmenu]').removeAttr("checked");
      //     $('#tab1').attr("checked", "checked");
      //   break;
      //   case '-500':
      //     // $('label[for=tab2]').siblings().removeClass('active');
      //     // $('label[for=tab2]').addClass('active');

      //     $('#tab2').attr("checked", "checked");
      //   break;
      //   case '-1000':
      //     // $('label[for=tab3]').siblings().removeClass('active');
      //     // $('label[for=tab3]').addClass('active');

      //     $('#tab3').attr("checked", "checked");
      //   break;
      // }
      if (loc == "0") {
        $('#tab1').attr("checked", "checked");
      } else if (loc == "-500") {
        $('#tab2').attr("checked", "checked");
      } else if (loc == "-1000") {
        $('#tab3').attr("checked", "checked");
      }
    }
  </script>

</body>

</html>